/*! Vista - v1.1.0 - 2014-09-23
* https://github.com/esha/vista
* Copyright (c) 2014 ESHA Research; Licensed MIT */
!function(a,b,c,d){"use strict";var e=function(){e=!1,g._list=[],g.style=b.createElement("style"),b.head.appendChild(g.style),a.addEventListener("hashchange",g.update),a.addEventListener("popstate",g.update);var c=function(a){var b=g["_"+a]=d[a];d[a]=function(){var a=b.apply(this,arguments);return g.update(),a}};c("pushState"),c("replaceState"),g.define("start"),g.update()},f=b.documentElement.classList,g={version:"1.1.0",define:function(a,b){switch(e&&e(),typeof b){case"undefined":b=a;case"string":b=new RegExp(b);case"object":b=b.test.bind(b)}g._list.push({name:a,test:b}),g.style.innerHTML+=g.rules(a)},inline:"span a input button select label img".split(" "),rules:function(a){return".show-"+a+", .vista-"+a+" .hide-"+a+" { display: none !important; }\n.vista-"+a+" .show-"+a+" { display: block !important; }\n.vista-"+a+" "+g.inline.join(".show-"+a+", .vista-"+a+" ")+".show-"+a+" { display: inline-block !important; }\n"},update:function(){var a=c+"",b=!0;g._list.forEach(function(c){var d=c.test(a);g.toggle(c.name,d),d&&(b=!1)}),g.toggle("start",b)},active:function(a){return f.contains("vista-"+a)},toggle:function(a,b){b=void 0===b?!g.active(a):b,f[b?"add":"remove"]("vista-"+a)},config:function(){for(var a=b.querySelectorAll("meta[itemprop=vista]"),c=0,d=a.length;d>c;c++){for(var e=a[c],f=(e.getAttribute("define")||"").split(" "),h=0,i=f.length;i>h;h++)g.define.apply(g,f[h].split("="));e.setAttribute("itemprop",f.length?"vista-done":"vista-fail")}a.length&&g.update()}};g.config(),b.addEventListener("DOMContentLoaded",g.config);var h=a.define||function(){};h((a.exports||a).Vista=g)}(window,document,window.location,window.history);