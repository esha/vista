/*! Vista - v2.1.0 - 2015-01-20
* https://github.com/esha/vista
* Copyright (c) 2015 ESHA Research; Licensed MIT */
!function(a,b,c,d){"use strict";var e=function(){e=!1,g._list=[],g.style=b.createElement("style"),b.head.appendChild(g.style),a.addEventListener("hashchange",g.update),a.addEventListener("popstate",g.update);var c=function(a){var b=g["_"+a]=d[a];d[a]=function(){var a=b.apply(this,arguments);return g.update(),a}};c("pushState"),c("replaceState"),g.define("start"),g.update()},f=b.documentElement,g={version:"2.1.0",define:function(a,b,c){switch(e&&e(),typeof b){case"undefined":b=a;case"string":b=new RegExp(b);case"object":b=b.test.bind(b)}g._list.push({name:a,test:b}),g.style.textContent+=g.rules(a,c)},rules:function(a,b){return'[vista~="'+a+'"],\n[vista-'+a+'] [vista~="!'+a+'"] {\n  display: none !important;\n}\n[vista-'+a+'] [vista~="'+a+'"] {\n  display: block !important;\n  display: '+(b||"initial")+" !important;\n}\n"},update:function(){var a=c+"",b=!0;g._list.forEach(function(c){var d=c.test(a);g.toggle(c.name,d),d&&(b=!1)}),g.toggle("start",b)},defined:function(a){for(var b=0;b<g._list.length;b++)if(g._list[b].name===a)return!0;return!1},active:function(a){return f.hasAttribute("vista-"+a)},toggle:function(a,b){b=void 0===b?!g.active(a):b,f[b?"setAttribute":"removeAttribute"]("vista-"+a,"active")},config:function(){for(var a=b.querySelectorAll("meta[itemprop=vista]"),c=0,d=a.length;d>c;c++){for(var e=a[c],f=(e.getAttribute("define")||"").split(" "),h=e.getAttribute("style"),i=0,j=f.length;j>i;i++){var k=f[i],l=k.indexOf("=");l>0?g.define(k.substring(0,l),k.substring(l+1),h):g.define(k,void 0,h)}e.setAttribute("itemprop",f.length?"vista-done":"vista-fail")}for(var m=b.querySelectorAll("[vista]"),n=0;n<m.length;n++)for(var o=m[n].getAttribute("vista").split(" "),p=0;p<o.length;p++){var q=o[p];"!"===q.charAt(0)&&(q=q.substring(1)),g.defined(q)||g.define(q)}(a.length||m.length)&&g.update()}};g.config(),b.addEventListener("DOMContentLoaded",g.config);var h=a.define||function(){};h((a.exports||a).Vista=g)}(window,document,window.location,window.history);