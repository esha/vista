<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Vista by esha</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/github-light.css">
    <meta name="viewport" content="width=device-width">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>Vista</h1>
        <p>Declarative, URL-driven display control.</p>

        <p class="view"><a href="https://github.com/esha/vista">View the Project on GitHub <small>esha/vista</small></a></p>


        <ul>
          <li><a href="https://github.com/esha/vista/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/esha/vista/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/esha/vista">View On <strong>GitHub</strong></a></li>
        </ul>

        <p>
          Mini Demo
          <a class="jsbin-embed" href="http://jsbin.com/rulagofiwi/embed?output">JS Bin on jsbin.com</a>
          <script src="http://static.jsbin.com/js/embed.min.js?3.39.15"></script>
        </p>
      </header>
      <section>
        <h4>
<a id="vista-uses-generated-css-to-provide-declarative-url-driven-control-of-when-or-how-any-elements-in-your-page-are-displayed" class="anchor" href="#vista-uses-generated-css-to-provide-declarative-url-driven-control-of-when-or-how-any-elements-in-your-page-are-displayed" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Vista uses generated CSS to provide declarative, URL-driven control of when (or how) any elements in your page are displayed.</h4>

<h3>
<a id="a-quick-example" class="anchor" href="#a-quick-example" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>A Quick Example</h3>

<div class="highlight highlight-text-html-basic"><pre>&lt;<span class="pl-ent">p</span> <span class="pl-e">vista</span>=<span class="pl-s"><span class="pl-pds">"</span>foo<span class="pl-pds">"</span></span>&gt;Foo&lt;/<span class="pl-ent">p</span>&gt;<span class="pl-c">&lt;!-- hidden while no section of the URL is 'foo' --&gt;</span>
&lt;<span class="pl-ent">p</span> <span class="pl-e">vista</span>=<span class="pl-s"><span class="pl-pds">"</span>!foo<span class="pl-pds">"</span></span>&gt;Bar&lt;/<span class="pl-ent">p</span>&gt;<span class="pl-c">&lt;!-- visible while no section of the URL is 'foo' --&gt;</span>
&lt;<span class="pl-ent">a</span> <span class="pl-e">href</span>=<span class="pl-s"><span class="pl-pds">"</span>#foo<span class="pl-pds">"</span></span>&gt;Show Foo And Hide Bar&lt;/<span class="pl-ent">a</span>&gt;
&lt;<span class="pl-ent">a</span> <span class="pl-e">href</span>=<span class="pl-s"><span class="pl-pds">"</span>#notjustfoo<span class="pl-pds">"</span></span>&gt;Hide Foo And Show Bar&lt;/<span class="pl-ent">a</span>&gt;</pre></div>

<h2>
<a id="wait-what-is-this-for" class="anchor" href="#wait-what-is-this-for" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Wait, What Is This For?</h2>

<p>In a typical webapp, the URL loads a different page of HTML elements. But in a single page webapp, all elements live in the same page but only some are displayed at any one time. Vista makes it easy, even necessary, to keep that meaningful relationship between the URL and the elements that are displayed. After all, if you use the URL to control element display, you can't forget to update the URL. This means you always support the back button, deep linking, and bookmarks.</p>

<p>Vista lets you manage element display in a way that is simple, declarative, decoupled, and fast. Just add a <code>vista="url-section-here"</code> attribute to your element, and it will only be displayed when the URL has a section like that. Nothing else needed. If you want more complex URL tests, Vista lets you declare those in markup too. There's no manual display toggling, nor custom CSS, nor extra JavaScript to write. Vista works with frameworks or on its own. It has no dependencies, no known conflicts, and few constraints.</p>

<p>Try it out. In many cases, dynamic element display (unlike dynamic element content) is better managed in markup (which is display code, after all), without tight JavaScript coupling to routers, controllers, or renderers. With Vista, it's only between the URL and your <code>&lt;div&gt;</code>. This naturally and easily pushes workflow through the URL, enforcing good URL management, letting links be links and sticking to the declarative style that is natural to the web.</p>

<h2>
<a id="getting-started" class="anchor" href="#getting-started" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Getting Started</h2>

<p>Download the <a href="https://raw.github.com/esha/vista/master/dist/vista.min.js">production version</a> or the <a href="https://raw.github.com/esha/vista/master/dist/vista.js">development version</a>. <a href="https://travis-ci.org/esha/vista"><img src="https://travis-ci.org/esha/vista.png?branch=master" alt="Build Status"></a><br>
<a href="http://bower.io/">Bower</a>: <code>bower install vista</code><br>
<a href="https://npmjs.org/package/vista">NPM</a>: <code>npm install vista</code><br>
<a href="http://component.io/">Component</a>: <code>component install esha/vista</code>  </p>

<h2>
<a id="documentation" class="anchor" href="#documentation" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Documentation</h2>

<h3>
<a id="defining-your-views" class="anchor" href="#defining-your-views" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Defining Your Views</h3>

<p>"Views" with Vista are defined by a name and a "test" for the current URL (optionally, a display style too). In many cases, that name and the test can be the same value, as in the quick example above. In other cases, you'll want a more complex URL test with a shorter logical name.</p>

<h4>
<a id="declarative-definition-best-way" class="anchor" href="#declarative-definition-best-way" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Declarative Definition (best way):</h4>

<p>Basic version (element is visible when URL like '<a href="http://example.com/simple.html">http://example.com/simple.html</a>'):  </p>

<div class="highlight highlight-text-html-basic"><pre>&lt;<span class="pl-ent">div</span> <span class="pl-e">vista</span>=<span class="pl-s"><span class="pl-pds">"</span>simple<span class="pl-pds">"</span></span>&gt;...&lt;/<span class="pl-ent">div</span>&gt;</pre></div>

<p>Named test (visible when URL like '<a href="http://example.com?test_this=true">http://example.com?test_this=true</a>'):  </p>

<div class="highlight highlight-text-html-basic"><pre>&lt;<span class="pl-ent">meta</span> <span class="pl-e">itemprop</span>=<span class="pl-s"><span class="pl-pds">"</span>vista<span class="pl-pds">"</span></span> <span class="pl-e">define</span>=<span class="pl-s"><span class="pl-pds">"</span>name=test_this<span class="pl-pds">"</span></span>&gt;
&lt;<span class="pl-ent">div</span> <span class="pl-e">vista</span>=<span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span>&gt;...&lt;/<span class="pl-ent">div</span>&gt;</pre></div>

<p>Add a 2nd named, regexp test and a custom style:  </p>

<div class="highlight highlight-text-html-basic"><pre>&lt;<span class="pl-ent">meta</span> <span class="pl-e">itemprop</span>=<span class="pl-s"><span class="pl-pds">"</span>vista<span class="pl-pds">"</span></span> <span class="pl-e">define</span>=<span class="pl-s"><span class="pl-pds">"</span>name=test_this grid=layout=grid<span class="pl-pds">"</span></span> <span class="pl-e">style</span>=<span class="pl-s"><span class="pl-pds">"</span>flex<span class="pl-pds">"</span></span>&gt;
&lt;<span class="pl-ent">div</span> <span class="pl-e">vista</span>=<span class="pl-s"><span class="pl-pds">"</span>grid<span class="pl-pds">"</span></span>&gt;...&lt;/<span class="pl-ent">div</span>&gt;<span class="pl-c">&lt;!-- 'display: flex', when URL like http://example.com?layout=grid&amp;a=1 --&gt;</span>
&lt;<span class="pl-ent">span</span> <span class="pl-e">vista</span>=<span class="pl-s"><span class="pl-pds">"</span>!name<span class="pl-pds">"</span></span>&gt;...&lt;/<span class="pl-ent">span</span>&gt;<span class="pl-c">&lt;!-- 'display: flex', when URL lacks a 'test_this' section --&gt;</span></pre></div>

<p>As you can see, multiple definitions can share the same <code>&lt;meta itemprop="vista"&gt;</code> element, as long as they are space-delimited.</p>

<p>It may be helpful to know that in the common case, where no custom display style is specified, the default style used is <code>initial</code> (with <code>block</code> as fallback for browsers that need it).  </p>

<p>Also, note that definitions never need to be declared next to the elements they are controlling.
Your <code>&lt;meta itemprop="vista"&gt;</code> definitions can be placed anywhere. The <code>&lt;head&gt;</code> element is recommended.</p>

<h4>
<a id="programmatic-definition-if-you-really-must" class="anchor" href="#programmatic-definition-if-you-really-must" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Programmatic Definition (if you really must):</h4>

<p>The provided API is <code>Vista.define(name[, test[, style]])</code>. Here are some examples:</p>

<div class="highlight highlight-source-js"><pre><span class="pl-c">// simple view, where the name and URL test value are the same</span>
<span class="pl-smi">Vista</span>.<span class="pl-en">define</span>(<span class="pl-s"><span class="pl-pds">'</span>reports<span class="pl-pds">'</span></span>);

<span class="pl-c">// view with full RegExp to test if URL's full hash equals a chart</span>
<span class="pl-smi">Vista</span>.<span class="pl-en">define</span>(<span class="pl-s"><span class="pl-pds">'</span>hasChart<span class="pl-pds">'</span></span>,<span class="pl-sr"> <span class="pl-pds">/</span>#(pie<span class="pl-k">|</span>bar)<span class="pl-k">$</span><span class="pl-pds">/</span></span>);

<span class="pl-c">// view with a custom test function to which the URL is passed and an alternate style</span>
<span class="pl-smi">Vista</span>.<span class="pl-en">define</span>(<span class="pl-s"><span class="pl-pds">'</span>special<span class="pl-pds">'</span></span>, <span class="pl-k">function</span>(<span class="pl-smi">url</span>) {
    <span class="pl-c">// return a truthy value to pass the test or falsey to fail</span>
    <span class="pl-k">return</span> <span class="pl-smi">url</span>.<span class="pl-c1">indexOf</span>(<span class="pl-s"><span class="pl-pds">'</span>special<span class="pl-pds">'</span></span>) <span class="pl-k">&gt;</span> <span class="pl-c1">0</span> <span class="pl-k">||</span> <span class="pl-smi">localStorage</span>.<span class="pl-c1">getItem</span>(<span class="pl-s"><span class="pl-pds">'</span>special<span class="pl-pds">'</span></span>);
}, <span class="pl-s"><span class="pl-pds">'</span>inline-block<span class="pl-pds">'</span></span>);</pre></div>

<p>Of course, only the last one actually must be done with JavaScript. Functions may not be defined as tests via markup at this time, though they may be supported (via reference) eventually.</p>

<p>Please note that when you define new tests programmatically, they are not automatically applied until the next time the location is updated. To force an immediate re-evaluation of all tests, call <code>Vista.update()</code>.</p>

<h3>
<a id="using-your-views" class="anchor" href="#using-your-views" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Using Your Views</h3>

<p>To show an element only when a test passes:  </p>

<p><code>&lt;button vista="nameOfTest"&gt;</code></p>

<p>To show an element only when a test fails:</p>

<p><code>&lt;span vista="!nameOfTest"&gt;</code></p>

<p>To show an element when any of several tests pass:</p>

<p><code>&lt;a vista="my_test myOtherTest"&gt;</code></p>

<p>To show an element when all of several tests pass:</p>

<p><code>&lt;div vista="nameOfTest+my_test"&gt;</code></p>

<p>The needed CSS rules are generated and applied automatically for you. Here's another small usage example:</p>

<div class="highlight highlight-text-html-basic"><pre>&lt;<span class="pl-ent">body</span>&gt;
  &lt;<span class="pl-ent">div</span> <span class="pl-e">vista</span>=<span class="pl-s"><span class="pl-pds">"</span>reports<span class="pl-pds">"</span></span>&gt;
    Reports would go here, of course.
  &lt;/<span class="pl-ent">div</span>&gt;
  <span class="pl-c">&lt;!-- hide the submenu to make more room for the chart --&gt;</span>
  &lt;<span class="pl-ent">div</span> <span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>submenu<span class="pl-pds">"</span></span> <span class="pl-e">vista</span>=<span class="pl-s"><span class="pl-pds">"</span>!hasChart<span class="pl-pds">"</span></span>&gt;
    Sub-menu is here...
  &lt;/<span class="pl-ent">div</span>&gt;
  ...
&lt;/<span class="pl-ent">body</span>&gt;</pre></div>

<h3>
<a id="implementation" class="anchor" href="#implementation" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Implementation</h3>

<p>The names of each defined view are used to generate the needed CSS rules for controlling the display of related <code>[vista~="name"]</code> elements. All declarative URL tests are turned into regular expressions. If the declared test starts/ends with anything that looks like URL format chars (i.e. <code>./\?=&amp;#</code>) or regexp start/end chars (<code>^</code> and <code>$</code>), then that end of the test is left as-is, otherwise, the end will be pre/postfixed with regexp to match those relevant chars. This is done to ensure that full URL section matches are the default (avoiding false positives like "color=reddish" when you only wanted "color=red"). The resulting regexps are tested against the current URL of the page at page load and any time that the location is updated. As shown above, if you are using <code>Vista.define(name, test[, style])</code>, the test parameter will directly accept a RegExp instance or Function. If, via either declarative or programmatic definition, the test is omitted, then the name itself is always used as the test expression. Most users will find this sufficient in the majority of uses.</p>

<p>Upon page load, location changes, or calls to <code>Vista.update()</code>, all tests are evaluated. For each one, a correlating <code>vista-name</code> attribute on the <code>&lt;html&gt;</code> element is toggled, according to whether the test returns a truthy or falsey value. </p>

<h3>
<a id="advanced-features" class="anchor" href="#advanced-features" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>"Advanced" Features</h3>

<p>Temporarily force a particular status (i.e. override the latest update):</p>

<p><code>Vista.toggle(name[, active]);</code></p>

<p>Test whether a particular status is active or not:</p>

<p><code>Vista.active(name);</code></p>

<p>Write your own CSS rules that use the "[vista-name]" attributes toggled on the document element as the location changes:</p>

<p><code>html[vista-name] .my-thing { ... }</code></p>

<h2>
<a id="release-history" class="anchor" href="#release-history" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Release History</h2>

<ul>
<li>2014-04-10 <a href="https://github.com/esha/vista/tree/0.1.0">v0.1.0</a> (first public release)</li>
<li>2014-04-11 <a href="https://github.com/esha/vista/tree/0.1.1">v0.1.1</a> (test full location, add some documentation)</li>
<li>2014-04-16 <a href="https://github.com/esha/vista/tree/0.2.0">v0.2.0</a> (flip toggle classes to vista-{name})</li>
<li>2014-04-24 <a href="https://github.com/esha/vista/tree/0.2.1">v0.2.1</a> (watch replaceState calls)</li>
<li>2014-08-25 <a href="https://github.com/esha/vista/tree/1.0.0">v1.0.0</a> (multiple &lt;meta itemprop="vista" define="... instead of single &lt;meta name="vista" content...)</li>
<li>2014-09-23 <a href="https://github.com/esha/vista/tree/1.1.0">v1.1.0</a> (Vista.active(name), toggle fix)</li>
<li>2014-10-20 <a href="https://github.com/esha/vista/tree/2.0.1">v2.0.1</a> (Use attributes instead of classes, add configurable display style, '=' now allowed in meta definitions)</li>
<li>2015-01-20 <a href="https://github.com/esha/vista/tree/2.1.1">v2.1.1</a> (Support shortcut define-and-use syntax, add Vista.defined(name) method)</li>
<li>2016-06-23 <a href="https://github.com/esha/vista/tree/3.0.0">v3.0.0</a> (Removed Vista.defined, support compound+definition+test syntax, update dev deps, misc refactoring)</li>
<li>2016-09-12 <a href="https://github.com/esha/vista/tree/3.1.0">v3.1.0</a> (Match full URL sections by default, via smart pre/postfix of tests)</li>
</ul>
      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/esha">esha</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-42479338-3");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>
